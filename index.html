<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Invent√°rio de Esquemas de Young - Cleo Martins</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400;0,600;1,400&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet">

<style>
  :root {
    --cream: #F7F4EF;
    --sage: #4A2F26;
    --terracotta: #C38A6B;
    --gray-mid: #7A6560;
    --border: #E4DDD5;
    --shadow: rgba(74,47,38,0.07);
    --error-red: #A84848;
  }

  * { margin:0; padding:0; box-sizing:border-box; }
  body { font-family: 'DM Sans', sans-serif; background: var(--cream); color: var(--sage); min-height: 100vh; font-size: 15px; }

  /* HEADER */
  .header { background: #F7F4EF; border-bottom: 1px solid var(--border); padding: 18px 32px; display: flex; align-items: center; gap: 14px; position: sticky; top: 0; z-index: 100; box-shadow: 0 1px 8px var(--shadow); }
  .header-logo { width: 36px; height: 36px; background: var(--sage); border-radius: 50%; display: flex; align-items: center; justify-content: center; }
  .header-title { font-family: 'Lora', serif; font-size: 17px; font-weight: 600; }
  .progress-bar-wrap { margin-left: auto; display: flex; align-items: center; gap: 12px; min-width: 200px; }
  .progress-track { flex:1; height: 6px; background: #DDD8D0; border-radius: 99px; overflow: hidden; }
  .progress-fill { height: 100%; background: var(--sage); transition: width 0.4s ease; width: 0%; }

  /* INTRO & FORMS */
  .container-wide { max-width: 760px; margin: 60px auto; padding: 0 24px; }
  .screen { display: none; }
  .screen.active { display: block; }
  .intro-heading { font-family: 'Lora', serif; font-size: 38px; margin-bottom: 24px; }
  .instructions-box, .patient-form { background: #FFF; border: 1px solid var(--border); border-radius: 16px; padding: 32px; margin-bottom: 30px; }
  .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-top: 15px; }
  .form-group label { font-size: 11px; text-transform: uppercase; color: var(--gray-mid); font-weight: 600; display: block; margin-bottom: 5px; }
  .form-group input { width: 100%; border: 1px solid var(--border); border-radius: 10px; padding: 12px; background: var(--cream); outline: none; }

  /* QUESTION CARDS */
  .question-card { background: #FFF; border: 1px solid var(--border); border-radius: 14px; padding: 24px; margin-bottom: 16px; transition: 0.2s; }
  .question-card.answered { border-color: #D4C8C2; box-shadow: 0 2px 8px var(--shadow); }
  .question-card.missing { border: 2px solid var(--error-red); background: #FFF9F9; }
  .question-num { width: 28px; height: 28px; border: 1.5px solid #DDD; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 11px; margin-bottom: 15px; }
  .question-card.answered .question-num { background: var(--terracotta); border-color: var(--terracotta); color: #FFF; }
  .question-text { font-size: 15px; line-height: 1.6; margin-bottom: 20px; }

  /* SCALE BUTTONS WITH LABELS */
  .scale-options { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }
  .scale-btn { 
    background: var(--cream); border: 1.5px solid var(--border); border-radius: 10px; padding: 12px 8px; cursor: pointer; text-align: center; transition: 0.2s; display: flex; flex-direction: column; align-items: center; justify-content: center;
  }
  .scale-btn strong { font-size: 16px; margin-bottom: 2px; }
  .scale-btn span { font-size: 9px; line-height: 1.2; color: var(--gray-mid); font-weight: 400; }
  .scale-btn.selected { background: var(--sage); border-color: var(--sage); color: #FFF; }
  .scale-btn.selected span { color: #EEE; }

  /* NAVIGATION */
  .btn-action { width: 100%; padding: 16px; background: var(--sage); color: #FFF; border: none; border-radius: 12px; font-weight: 600; cursor: pointer; font-size: 16px; transition: 0.2s; }
  .btn-action:hover { background: #321f18; }
  .nav-row { display: flex; justify-content: space-between; gap: 20px; margin-top: 30px; }
  .btn-nav { padding: 14px 24px; border-radius: 10px; border: 1.5px solid var(--border); cursor: pointer; font-weight: 500; }
  .btn-nav.primary { background: var(--sage); color: #FFF; border: none; }

  /* RESULTS */
  .patient-summary { background: #FFF; border: 1px solid var(--border); border-radius: 14px; padding: 20px; margin-bottom: 30px; display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; }
  .score-card { background: #FFF; border: 1px solid var(--border); border-radius: 12px; padding: 15px; margin-bottom: 10px; display: flex; align-items: center; gap: 15px; }
  .bar-track { flex: 1; height: 8px; background: #EEE; border-radius: 10px; overflow: hidden; }
  .bar-fill { height: 100%; background: var(--terracotta); }

  @media (min-width: 600px) { .scale-options { grid-template-columns: repeat(6, 1fr); } }
</style>
</head>
<body>

<div class="header">
  <div class="header-logo"><svg viewBox="0 0 24 24" width="18" fill="white"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15v-4H7l5-8v4h4l-5 8z"/></svg></div>
  <div><div class="header-title">Invent√°rio de Esquemas</div><div class="header-subtitle">Cleo Martins - Psicoterapia Integrativa</div></div>
  <div class="progress-bar-wrap" id="pWrap" style="display:none"><div class="progress-track"><div class="progress-fill" id="pFill"></div></div></div>
</div>

<div class="container-wide">
  <div class="screen active" id="scrIntro">
    <h1 class="intro-heading">Jornada de<br><em>Autoconhecimento</em></h1>
    <div class="instructions-box">
      <h3 style="margin-bottom:10px">üìã Como responder</h3>
      <p style="font-size:14px; color:var(--gray-mid); line-height:1.6">Responda com base no que voc√™ <strong>sente emocionalmente</strong>. O teste possui 212 quest√µes divididas em m√≥dulos. Voc√™ s√≥ avan√ßar√° para o pr√≥ximo m√≥dulo ap√≥s completar a p√°gina atual.</p>
    </div>
    <div class="patient-form">
      <h3>Dados da Paciente</h3>
      <div class="form-row">
        <div class="form-group"><label>Nome Completo</label><input type="text" id="pNome" placeholder="Seu nome"></div>
        <div class="form-group"><label>Idade</label><input type="number" id="pIdade" placeholder="Ex: 48"></div>
      </div>
      <div class="form-row">
        <div class="form-group"><label>Data</label><input type="date" id="pData"></div>
        <div class="form-group"><label>Profiss√£o</label><input type="text" id="pProfissao" placeholder="Sua profiss√£o"></div>
      </div>
    </div>
    <button class="btn-action" onclick="startQuiz()">Iniciar Invent√°rio ‚Üí</button>
  </div>

  <div class="screen" id="scrQuest">
    <div id="qWrap"></div>
  </div>

  <div class="screen" id="scrRes">
    <div class="results-header" style="text-align:center; margin-bottom:30px">
      <h2 style="font-family:Lora; font-size:28px">Avalia√ß√£o Conclu√≠da</h2>
      <p style="color:var(--gray-mid)">Seu mapa emocional foi gerado com sucesso.</p>
    </div>
    <div class="patient-summary" id="pSumm"></div>
    <div id="dScores"></div>
    <div style="background:#F7F4EF; padding:30px; border-radius:16px; text-align:center; margin-top:30px">
      <h3>Sincronizar Prontu√°rio</h3>
      <p style="font-size:13px; margin-bottom:20px">Os dados ser√£o enviados de forma segura para o Consult√≥rio Virtual.</p>
      <button id="btnEnv" class="btn-action" style="max-width:300px" onclick="sendToSupabase()">Enviar Resultados</button>
      <button onclick="window.print()" class="btn-nav" style="margin-top:15px; display:block; width:100%; max-width:300px; margin-left:auto; margin-right:auto">üñ®Ô∏è Gerar Relat√≥rio PDF</button>
      <div id="sStat" style="margin-top:15px; font-size:13px; display:none"></div>
    </div>
  </div>
</div>

<script>
const scaleLabels = ["","Inteiramente falsa","Em grande parte falsa","Levemente mais verdadeira","Moderadamente verdadeira","Em grande parte verdadeira","Descreve perfeitamente"];

const domains = [
  { key:"pe", name:"Desconex√£o e Rejei√ß√£o", questions:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50] },
  { key:"au", name:"Autonomia e Desempenho", questions:[51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100] },
  { key:"li", name:"Limites Prejudicados", questions:[101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140] },
  { key:"oo", name:"Orienta√ß√£o para o Outro", questions:[141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180] },
  { key:"si", name:"Supervigil√¢ncia e Inibi√ß√£o", questions:[181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212] }
];

const questionsData = [
  [1,"As pessoas n√£o conseguiram satisfazer minhas necessidades emocionais."],
  [2,"Eu n√£o recebi amor e aten√ß√£o."],
  [3,"De um modo geral, n√£o tenho ningu√©m para me dar conselhos e apoio emocional."],
  [4,"A maior parte do tempo, n√£o tenho ningu√©m para me dar carinho, compartilhar comigo e se importar profundamente com o que me acontece."],
  [5,"Eu n√£o tive ningu√©m que quisesse se aproximar e passar bastante tempo comigo em grande parte da minha vida."],
  [6,"Em geral, n√£o havia pessoas para me dar carinho, seguran√ßa e afei√ß√£o."],
  [7,"Eu n√£o senti que era especial para algu√©m, em grande parte da minha vida."],
  [8,"Em geral, n√£o tenho ningu√©m que realmente me escute, me compreenda ou esteja sintonizado com minhas verdadeiras necessidades e sentimentos."],
  [9,"Eu, raramente tenho alguma pessoa forte para me dar bons conselhos ou orienta√ß√£o quando n√£o tenho certeza do que fazer."],
  [10,"Eu me preocupo com a possibilidade de as pessoas que eu amo morrerem, mesmo que haja poucas raz√µes m√©dicas para confirmar minhas preocupa√ß√µes."],
  [11,"Percebo que me agarro √†s pessoas com as quais tenho intimidade, por ter medo de que elas me deixem."],
  [12,"Eu me preocupo com a possibilidade das pessoas que gosto me deixarem ou me abandonarem."],
  [13,"Sinto que me falta uma base est√°vel de apoio emocional."],
  [14,"N√£o espero que os relacionamentos importantes durem; acredito que eles v√£o terminar."],
  [15,"Sinto que me apego a parceiros/as que n√£o s√£o capazes de se comprometerem comigo."],
  [16,"No final, acabarei s√≥."],
  [17,"Quando sinto que algu√©m com quem eu me importo est√° se afastando, fico desesperado."],
  [18,"√Äs vezes, tenho tanto medo de que as pessoas me deixem que acabo fazendo com que se afastem."],
  [19,"Fico incomodado quando algu√©m me deixa sozinho, mesmo que por pouco tempo."],
  [20,"N√£o posso esperar que as pessoas que me ap√≥iam estejam sempre dispon√≠veis."],
  [21,"N√£o devo ficar realmente √≠ntimo das pessoas, porque n√£o posso ter certeza de que poderei contar sempre com elas."],
  [22,"Parece que as pessoas importantes da minha vida est√£o sempre indo e vindo."],
  [23,"Tenho muito medo de que as pessoas que eu amo encontrem algu√©m que v√£o preferir e me deixem."],
  [24,"As pessoas que me s√£o pr√≥ximas t√™m sido muito imprevis√≠veis; ora s√£o legais, ora est√£o zangadas, chateadas, absorvidas em si mesmas, brigando, e assim por diante."],
  [25,"Preciso tanto das pessoas que tenho medo de perd√™-las."],
  [26,"Eu me sinto indefeso se n√£o tiver pessoas para me proteger, √†s quais eu me preocupo muito em perd√™-las."],
  [27,"N√£o posso ser eu mesmo ou expressar o que realmente sinto, pois as pessoas me deixariam."],
  [28,"Sinto que as pessoas querem tirar vantagem de mim."],
  [29,"Frequentemente, sinto que tenho que me proteger dos outros."],
  [30,"Sinto que n√£o posso baixar a guarda na presen√ßa dos outros, pois eles me prejudicariam intencionalmente."],
  [31,"Se uma pessoa √© legal comigo, fico imaginando que ela est√° querendo alguma coisa."],
  [32,"√â s√≥ uma quest√£o de tempo antes que as pessoas me traiam."],
  [33,"A maioria das pessoas s√≥ pensa em si mesma."],
  [34,"Tenho grande dificuldade em confiar nas pessoas."],
  [35,"Desconfio muito dos motivos dos outros."],
  [36,"As outras pessoas raramente s√£o honestas; elas geralmente n√£o s√£o o que parecem."],
  [37,"Eu geralmente fico procurando os motivos escondidos das pessoas."],
  [38,"Se acho que algu√©m quer me prejudicar, tento prejudic√°-la/o primeiro."],
  [39,"As pessoas t√™m de provar coisas para mim antes que eu confie nelas."],
  [40,"Invento 'testes' para as pessoas para ver se elas est√£o me dizendo a verdade e se est√£o bem intencionadas."],
  [41,"Acredito no ditado: 'quem n√£o controla √© controlado'."],
  [42,"Fico com raiva quando penso como fui maltratado pelas pessoas durante toda a minha vida."],
  [43,"Por toda a minha vida, pessoas que me eram pr√≥ximas tiraram vantagem de mim ou me usaram para seus prop√≥sitos."],
  [44,"Fui abusado fisicamente, emocionalmente ou sexualmente por pessoas importantes na minha vida."],
  [45,"Eu n√£o me encaixo."],
  [46,"Sou fundamentalmente diferente das outras pessoas."],
  [47,"Eu n√£o perten√ßo a ningu√©m; sou um solit√°rio."],
  [48,"Sinto-me alienado das outras pessoas."],
  [49,"Eu me sinto isolado e sozinho."],
  [50,"Sempre me sinto exclu√≠da dos grupos."],
  [51,"Ningu√©m me entende realmente."],
  [52,"A minha fam√≠lia sempre foi diferente das fam√≠lias que nos cercavam."],
  [53,"√Äs vezes, me sinto um alien√≠gena."],
  [54,"Se eu desaparecesse amanh√£, ningu√©m perceberia."],
  [55,"Nenhum/a homem/mulher que eu desejar vai me amar depois de saber dos meus defeitos."],
  [56,"Ningu√©m que eu desejar vai querer ficar perto de mim depois que conhecer meu verdadeiro eu."],
  [57,"Sou inerentemente defeituoso e cheio de falhas."],
  [58,"Por mais que eu tente, sinto que n√£o conseguirei que um/a homem/mulher significativo/a me respeite ou sinta que eu tenho valor."],
  [59,"N√£o sou digno do amor, da aten√ß√£o e do respeito dos outros."],
  [60,"Sinto que n√£o mere√ßo ser amado."],
  [61,"Sou inaceit√°vel demais, de todas as maneiras poss√≠veis, para me revelar aos outros."],
  [62,"Se as pessoas descobrissem meus defeitos b√°sicos, eu n√£o conseguiria encar√°-las."],
  [63,"Quando as pessoas gostam de mim, sinto que as estou enganando."],
  [64,"Frequentemente, sou atra√≠do por pessoas que s√£o muito cr√≠ticas ou me rejeitam."],
  [65,"Tenho segredos que eu n√£o quero que as pessoas pr√≥ximas a mim descubram."],
  [66,"Foi por minha culpa que meus pais n√£o conseguiram me amar o suficiente."],
  [67,"N√£o deixo que as pessoas conhe√ßam meu verdadeiro eu."],
  [68,"Um dos meus maiores medos √© que meus defeitos sejam expostos."],
  [69,"N√£o posso compreender como ningu√©m conseguiu me amar."],
  [70,"Mesmo quando as coisas parecem estar indo bem, sinto que isto √© apenas tempor√°rio."],
  [71,"Se algo de bom acontecer, fico preocupado(a) se algo de ruim n√£o vai acontecer em seguida."],
  [72,"Todo cuidado √© pouco; quase sempre alguma coisa vai mal."],
  [73,"Por mais que trabalhe, fico preocupado(a) com a possibilidade de ficar na mis√©ria e perder quase tudo que possuo."],
  [74,"As pessoas que valorizo n√£o iriam querer se associar a mim devido ao meu status social (por exemplo, renda, n√≠vel de instru√ß√£o, profiss√£o)."],
  [75,"Fico preocupado(a) com a possibilidade de uma decis√£o errada provocar uma cat√°strofe."],
  [76,"Quase nada do que eu fa√ßo no trabalho (ou na escola) √© t√£o bom quanto o que os outros fazem."],
  [77,"Sou incompetente no que se refere √†s realiza√ß√µes."],
  [78,"A maioria das pessoas √© mais capaz do que eu no trabalho e em suas realiza√ß√µes."],
  [79,"Eu sou um fracasso."],
  [80,"N√£o tenho tanto talento quanto a maioria das pessoas tem em sua profiss√£o."],
  [81,"N√£o sou t√£o inteligente quanto a maioria das pessoas no que se refere a trabalho (ou estudo)."],
  [82,"Sinto-me humilhado por meus fracassos e inadequa√ß√µes na esfera do trabalho."],
  [83,"Frequentemente me sinto embara√ßado perto das pessoas porque n√£o estou √† altura delas em termos de realiza√ß√£o."],
  [84,"Muitas vezes comparo minhas realiza√ß√µes com as dos outros e acho que eles s√£o muito mais bem-sucedidos."],
  [85,"N√£o me sinto capaz de me arranjar sozinho no dia-a-dia."],
  [86,"Preciso que as outras pessoas me ajudem a fazer as coisas."],
  [87,"N√£o me sinto capaz de manejar bem as situa√ß√µes sem ajuda."],
  [88,"Acredito que as pessoas podem cuidar melhor de mim melhor do que eu mesmo."],
  [89,"Tenho dificuldade em lidar com tarefas novas fora do trabalho, a menos que tenha algu√©m para me orientar."],
  [90,"Penso em mim como uma pessoa dependente, no que se refere ao funcionamento cotidiano."],
  [91,"Acabo estragando tudo o que tento fazer, mesmo fora do trabalho (ou da escola)."],
  [92,"Sou incapaz em quase todas as √°reas da vida."],
  [93,"Se eu confiar no meu pr√≥prio julgamento nas situa√ß√µes do dia-a-dia, tomarei a decis√£o errada."],
  [94,"Falta-me bom senso."],
  [95,"N√£o se pode confiar em meu julgamento nas situa√ß√µes do dia-a-dia."],
  [96,"N√£o confio em minha capacidade de resolver os problemas que surgem no cotidiano."],
  [97,"Sinto que preciso de algu√©m em quem eu possa confiar para me dar conselhos sobre quest√µes pr√°ticas."],
  [98,"Sinto-me mais como uma crian√ßa do que como uma pessoa adulta quando √© preciso assumir responsabilidades do cotidiano."],
  [99,"Acho as responsabilidades do dia-a-dia esmagadoras."],
  [100,"N√£o consigo deixar de sentir que algo de ruim vai acontecer."],
  [101,"Sinto que algum desastre (natural, criminal, financeiro ou m√©dico) vai acontecer a qualquer momento."],
  [102,"Tenho medo de me tornar um 'sem-teto' ou um abandonado √† pr√≥pria sorte."],
  [103,"Tenho medo de ser atacado."],
  [104,"Sinto que devo ter muito cuidado com dinheiro, ou acabarei sem nada."],
  [105,"Tomo muitas precau√ß√µes para n√£o adoecer e n√£o me machucar."],
  [106,"Tenho medo de perder todo o meu dinheiro e ficar pobre."],
  [107,"Tenho medo de pegar uma doen√ßa s√©ria, mesmo que nada de s√©rio tenha sido diagnosticado pelos m√©dicos."],
  [108,"Sou uma pessoa medrosa."],
  [109,"Eu me preocupo muito com todas as coisas horr√≠veis que acontecem no mundo: crime, polui√ß√£o, e assim por diante."],
  [110,"Muitas vezes, acho que posso enlouquecer."],
  [111,"Sinto, frequentemente, que vou ter um ataque de ansiedade."],
  [112,"Tenho muito medo de ter um ataque card√≠aco, embora haja poucas raz√µes m√©dicas que justifiquem minha preocupa√ß√£o."],
  [113,"Acho que o mundo √© um lugar perigoso."],
  [114,"N√£o consegui me separar de meu pai/minha m√£e, ou de ambos, assim como outras pessoas da minha idade parecem conseguir."],
  [115,"Meu pai/minha m√£e, ou ambos, e eu, tendemos a nos envolver excessivamente com a vida e com os problemas uns dos outros."],
  [116,"√â muito dif√≠cil para meu pai/minha m√£e, ou ambos, e eu, escondermos detalhes √≠ntimos uns dos outros sem nos sentirmos tra√≠dos ou culpados."],
  [117,"Meu pai/minha m√£e, ou ambos, e eu, temos que nos falar quase todos os dias, ou um de n√≥s se sente culpado, magoado, desapontado ou sozinho."],
  [118,"Muitas vezes, sinto que n√£o tenho uma identidade separada da de meus pais ou parceiro/a."],
  [119,"Muitas vezes me parece que meus pais est√£o vivendo por interm√©dio de mim - eu n√£o tenho uma vida pr√≥pria."],
  [120,"√â muito dif√≠cil para eu manter alguma dist√¢ncia das pessoas de quem sou √≠ntimo; n√£o √© f√°cil para eu ter um senso separado de mim mesmo."],
  [121,"Estou t√£o envolvido com meu/minha parceiro/a ou com meus pais que n√£o sei realmente quem sou, ou o que quero."],
  [122,"Tenho dificuldade em separar meu ponto de vista, ou dos meus pais ou parceiro/a."],
  [123,"Sinto que n√£o tenho nenhuma privacidade no que se refere aos meus pais ou parceiro/a."],
  [124,"Sinto que meus pais est√£o, ou ficaram, muito magoados por eu morar sozinho, longe deles."],
  [125,"Deixo as pessoas fazerem o que querem porque tenho medo das conseq√º√™ncias."],
  [126,"Acho que se eu fizer o que quero, s√≥ vou arranjar problemas."],
  [127,"Sinto que n√£o tenho escolhas al√©m de ceder ao desejo das pessoas, ou elas v√£o me rejeitar ou retaliar de alguma forma."],
  [128,"Nos meus relacionamentos, deixo a outra pessoa ter o controle."],
  [129,"Sempre deixei os outros escolherem por mim, de modo que n√£o sei realmente o que quero."],
  [130,"Sinto que as maiores decis√µes da minha vida n√£o foram realmente minhas."],
  [131,"Eu me preocupo muito em agradar os outros para que eles n√£o me rejeitem."],
  [132,"Tenho muita dificuldade em exigir que meus direitos sejam respeitados e que meus sentimentos sejam levados em conta."],
  [133,"Eu me vingo das pessoas de maneira sutil, em vez de demonstrar minha raiva."],
  [134,"Vou muito al√©m do que a maioria das pessoas para evitar confronta√ß√µes."],
  [135,"Coloco as necessidades dos outros antes das minhas, ou me sinto culpado."],
  [136,"Sinto culpa quando desaponto as pessoas."],
  [137,"Dou mais √†s pessoas do que recebo delas."],
  [138,"Sou aquele que geralmente acaba cuidando das pessoas de quem sou pr√≥ximo."],
  [139,"N√£o h√° nada que n√£o possa aceitar quando amo algu√©m."],
  [140,"Sou uma boa pessoa, pois penso nos outros mais do que em mim mesmo."],
  [141,"No trabalho, normalmente sou aquele que se apresenta como volunt√°rio para fazer as tarefas extras, ou trabalhar mais tempo."],
  [142,"Por mais ocupado que esteja, eu sempre arranjo tempo para os outros."],
  [143,"Consigo me virar com muito pouco, porque as minhas necessidades s√£o m√≠nimas."],
  [144,"S√≥ me sinto feliz quando aqueles que me cercam est√£o felizes."],
  [145,"Fico t√£o ocupado fazendo coisas para as pessoas que gosto que tenho pouco tempo para mim."],
  [146,"Sempre fui aquele que escuta os problemas de todo mundo."],
  [147,"Fico mais √† vontade dando um presente do que recebendo."],
  [148,"As pessoas me v√™em fazendo mais pelos outros e pouco por mim."],
  [149,"Por mais que eu d√™, nunca √© suficiente."],
  [150,"Se fa√ßo o que quero, me sinto muito mal."],
  [151,"√â muito dif√≠cil para eu pedir aos outros que atendam √†s minhas necessidades."],
  [152,"Tenho medo de perder o controle das minhas a√ß√µes."],
  [153,"Tenho medo de machucar muito as pessoas, f√≠sica ou emocionalmente, caso perca o controle da minha raiva."],
  [154,"Sinto que preciso controlar as minhas emo√ß√µes e impulsos, ou algo de ruim pode acontecer."],
  [155,"Dentro de mim h√° muita raiva e ressentimentos que n√£o expresso."],
  [156,"Tenho muita vergonha de demonstrar sentimentos positivos em rela√ß√£o aos outros (por exemplo: afei√ß√£o, sinais de cuidado)."],
  [157,"Acho embara√ßoso expressar meus sentimentos para os outros."],
  [158,"Tenho dificuldade em ser carinhoso e espont√¢neo."],
  [159,"Eu me controlo tanto que as pessoas acham que eu n√£o sou emotivo/afetivo."],
  [160,"As pessoas me v√™em como emocionalmente contida."],
  [161,"Preciso ser o melhor em tudo que fa√ßo; n√£o consigo aceitar vir em segundo lugar."],
  [162,"Tento manter tudo dentro da mais perfeita ordem."],
  [163,"Preciso causar a melhor impress√£o, praticamente, o tempo todo."],
  [164,"Tento fazer o melhor, n√£o consigo aceitar o 'suficientemente bom'."],
  [165,"Tenho tantas coisas para fazer que quase n√£o me sobra tempo para relaxar de verdade."],
  [166,"Quase nada √© bom o bastante; sempre posso fazer melhor."],
  [167,"Preciso cumprir todas as minhas responsabilidades."],
  [168,"Sinto que existe uma press√£o constante sobre mim para conquistar e fazer as coisas."],
  [169,"Meus relacionamentos s√£o prejudicados porque exijo demais de mim."],
  [170,"Minha sa√∫de sofre porque me pressiono demais para sair bem."],
  [171,"Muitas vezes sacrifico prazer e felicidade para estar √† altura dos meus padr√µes."],
  [172,"Se cometo um erro, mere√ßo ser muito criticado."],
  [173,"N√£o consigo me soltar ou me desculpar por meus erros com facilidade."],
  [174,"Sou uma pessoa muito competitiva."],
  [175,"Dou muito valor a dinheiro e status."],
  [176,"Tenho que ser sempre o 'N√∫mero 1' em termos de desempenho."],
  [177,"Tenho muita dificuldade em aceitar um 'n√£o' como resposta quando quero alguma coisa de algu√©m."],
  [178,"Geralmente me zango, ou me irrito, quando n√£o consigo aquilo que quero."],
  [179,"Sou especial e n√£o deveria ter que aceitar muitas das restri√ß√µes impostas √†s outras pessoas."],
  [180,"Detesto ser obrigado a fazer alguma coisa, ou impedido de fazer o que quero."],
  [181,"Acho que n√£o deveria ter que obedecer √†s regras e conven√ß√µes normais assim como os outros."],
  [182,"Sinto que aquilo que tenho a oferecer √© muito mais valioso do que as contribui√ß√µes dos outros."],
  [183,"Geralmente coloco as minhas necessidades acima das necessidades dos outros."],
  [184,"Muitas vezes sinto que estou t√£o envolvido com as minhas prioridades que n√£o tenho tempo para os amigos ou a fam√≠lia."],
  [185,"As pessoas frequentemente me dizem que sou muito controlador em rela√ß√£o a como as coisas devem ser feitas."],
  [186,"Fico muito irritado quando as pessoas n√£o fazem o que eu lhes pe√ßo."],
  [187,"N√£o tolero que as pessoas me digam o que fazer."],
  [188,"Tenho grande dificuldade para deixar de beber, fumar, comer demais e modificar outros comportamentos problem√°ticos."],
  [189,"Parece que n√£o consigo me disciplinar e levar at√© o fim as tarefas rotineiras ou chatas."],
  [190,"Muitas vezes, me permito obedecer impulsos e expressar emo√ß√µes que me trazem problemas ou machucam as pessoas."],
  [191,"Quando n√£o consigo atingir algum objetivo, fico facilmente frustrado e desisto."],
  [192,"Para mim, √© muito dif√≠cil sacrificar uma gratifica√ß√£o imediata para atingir um objetivo a longo prazo."],
  [193,"Depois que come√ßo a sentir raiva, √© comum n√£o conseguir control√°-la."],
  [194,"Tendendo a fazer muitas coisas em excesso, mesmo sabendo que isso n√£o √© bom para mim."],
  [195,"Eu me aborre√ßo muito facilmente."],
  [196,"Quando as tarefas ficam dif√≠ceis, geralmente n√£o consigo perseverar e conclu√≠-las."],
  [197,"N√£o consigo me concentrar em nada por muito tempo."],
  [198,"N√£o consigo me obrigar a fazer coisas de que n√£o gosto, mesmo sabendo que √© para o meu pr√≥prio bem."],
  [199,"Perco a calma diante da ofensa mais insignificante."],
  [200,"Raramente consigo cumprir minhas resolu√ß√µes."],
  [201,"Quase nunca deixo de mostrar √†s pessoas o que realmente sinto, seja qual for o custo disso."],
  [202,"Frequentemente fa√ßo, por impulso, coisas que mais tarde lamento."],
  [203,"Ter dinheiro e conhecer pessoas importantes me faz sentir uma pessoa de valor."],
  [204,"Aquilo que consigo alcan√ßar tem mais valor para mim se for algo em que os outros reparem."],
  [205,"Sinto-me pouco importante, a n√£o ser que receba muita aten√ß√£o dos outros."],
  [206,"Quando fa√ßo uma interven√ß√£o em uma reuni√£o ou quando sou apresentado a algu√©m em um grupo, para mim √© importante obter reconhecimento e admira√ß√£o."],
  [207,"Receber muitos elogios dos outros me faz sentir como uma pessoa que tem valor."],
  [208,"Se cometer um erro mere√ßo ser castigado."],
  [209,"Se n√£o me esfor√ßar ao m√°ximo √© de esperar que as coisas corram mal."],
  [210,"Se n√£o fizer bem o que me compete mere√ßo sofrer as consequ√™ncias."],
  [211,"N√£o interessa o motivo pelo qual cometi um erro; quando fa√ßo algo errado √© preciso arcar com as consequ√™ncias."],
  [212,"Sou uma pessoa m√° que merece ser castigada."]
];

const answers = {};
let currentMod = 0;

function startQuiz() {
  if(!document.getElementById('pNome').value) { alert("Por favor, identifique-se no formul√°rio."); return; }
  document.getElementById('pWrap').style.display = 'flex';
  document.getElementById('scrIntro').classList.remove('active');
  document.getElementById('scrQuest').classList.add('active');
  renderModule(0);
}

function renderModule(idx) {
  currentMod = idx;
  const mod = domains[idx];
  const wrap = document.getElementById('qWrap');
  let html = `<div class="domain-header" style="margin-bottom:30px">
    <span style="color:var(--terracotta); font-size:12px; font-weight:600; text-transform:uppercase">M√≥dulo ${idx+1} de 5</span>
    <h2 style="font-family:Lora; font-size:24px">${mod.name}</h2>
  </div>`;

  mod.questions.forEach(qNum => {
    const q = questionsData.find(x => x[0] === qNum) || [qNum, "Quest√£o Cl√≠nica " + qNum];
    const ans = answers[qNum];
    html += `<div class="question-card ${ans?'answered':''}" id="q-${qNum}">
      <div class="question-num">${ans?'‚úì':qNum}</div>
      <p class="question-text">${q[1]}</p>
      <div class="scale-options">
        ${[1,2,3,4,5,6].map(v => `
          <button class="scale-btn ${ans===v?'selected':''}" onclick="setAns(${qNum},${v},this)">
            <strong>${v}</strong>
            <span>${scaleLabels[v]}</span>
          </button>
        `).join('')}
      </div>
    </div>`;
  });

  html += `<div class="nav-row">
    ${idx>0?`<button class="btn-nav" onclick="renderModule(${idx-1})">‚Üê Voltar</button>`:`<div></div>`}
    <button class="btn-nav primary" onclick="checkMod()">${idx<4?'Pr√≥ximo Passo ‚Üí':'Gerar Resultados'}</button>
  </div>`;

  wrap.innerHTML = html;
  window.scrollTo(0,0);
  updateProgress();
}

function setAns(q, v, btn) {
  answers[q] = v;
  const card = document.getElementById('q-'+q);
  card.classList.remove('missing');
  card.classList.add('answered');
  card.querySelector('.question-num').textContent = '‚úì';
  btn.parentElement.querySelectorAll('.scale-btn').forEach(b => b.classList.remove('selected'));
  btn.classList.add('selected');
  updateProgress();
}

function checkMod() {
  const mod = domains[currentMod];
  const missing = mod.questions.filter(q => !answers[q]);
  if(missing.length > 0) {
    missing.forEach(q => document.getElementById('q-'+q).classList.add('missing'));
    alert(`‚ö†Ô∏è Aten√ß√£o: Faltam ${missing.length} respostas nesta p√°gina.`);
    document.getElementById('q-'+missing[0]).scrollIntoView({behavior:'smooth', block:'center'});
    return;
  }
  if(currentMod < 4) renderModule(currentMod + 1); else showRes();
}

function updateProgress() {
  const count = Object.keys(answers).length;
  document.getElementById('pFill').style.width = (count/212*100)+'%';
}

function showRes() {
  document.getElementById('scrQuest').classList.remove('active');
  document.getElementById('scrRes').classList.add('active');
  const nome = document.getElementById('pNome').value;
  const data = document.getElementById('pData').value;
  document.getElementById('pSumm').innerHTML = `
    <div><label>Paciente</label><strong>${nome}</strong></div>
    <div><label>Data</label><strong>${data}</strong></div>
  `;

  let scores = '';
  domains.forEach(d => {
    const sum = d.questions.reduce((a, q) => a + (answers[q]||0), 0);
    const avg = (sum / d.questions.length).toFixed(2);
    const pct = ((avg-1)/5*100);
    scores += `<div class="score-card">
      <div style="flex:1"><strong>${d.name}</strong></div>
      <div class="bar-track"><div class="bar-fill" style="width:${pct}%"></div></div>
      <div style="font-weight:700">${avg}</div>
    </div>`;
  });
  document.getElementById('dScores').innerHTML = scores;
}

async function sendToSupabase() {
  const btn = document.getElementById('btnEnv');
  const stat = document.getElementById('sStat');
  btn.disabled = true; btn.textContent = 'Enviando...';
  stat.style.display = 'block'; stat.textContent = 'Sincronizando com o prontu√°rio...';

  const resText = domains.map(d => {
    const avg = (d.questions.reduce((a,q)=>a+answers[q],0)/d.questions.length).toFixed(2);
    return `${d.name}: ${avg}`;
  }).join(' | ');

  try {
    const resp = await fetch('https://nyelqgsqpqoasywdioxi.supabase.co/rest/v1/clientes', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'apikey': 'sb_publishable_IVMMnw4_9uF4C6-RBiElUg_lvIq8JRX',
        'Authorization': 'Bearer sb_publishable_IVMMnw4_9uF4C6-RBiElUg_lvIq8JRX'
      },
      body: JSON.stringify({
        nome_completo: document.getElementById('pNome').value,
        anotacoes: `Idade: ${document.getElementById('pIdade').value} | Profiss√£o: ${document.getElementById('pProfissao').value}`,
        origem: "Invent√°rio Online",
        resultados_teste: { resumo: resText }
      })
    });
    if(resp.ok) {
      stat.textContent = '‚úÖ Sucesso! Dados salvos no seu Consult√≥rio Virtual.';
      btn.textContent = 'Sincronizado ‚úî';
    } else throw new Error();
  } catch(e) {
    stat.textContent = '‚ùå Erro ao enviar. Tente gerar o PDF.';
    btn.disabled = false; btn.textContent = 'Tentar Novamente';
  }
}
</script>
</body>
</html>
